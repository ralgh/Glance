/*! Glance - v0.0.1 - 2013-06-18
* Copyright (c) 2013 Matthew Teece; Licensed  */
var Glance=function(){function t(t){var t=t||{};if(this.storage=t.storage||"store",this.data=t.data||{entries:[]},window.localStorage&&window.JSON){var a=localStorage.getItem(this.storage);a?this.data=n(a):i.setItem(this.storage,e(this.data))}}function e(t){return JSON.stringify(t)}function n(t){return JSON.parse(t)}var a,i=window.localStorage;return a=window.localStorage&&window.JSON&&window._?{_fetch:function(t){var e=_.indexOf(this.data.entries,t);return e},_fetchById:function(t){return _.findWhere(this.data.entries,{id:t})},save:function(t){if(t.id){var n=this._fetch(t);return n>=0?(this.data.entries[n]=t,localStorage.setItem(this.storage,e(this.data)),t):!1}return t.id=UUID.generate(),this.data.entries.push(t),localStorage.setItem(this.storage,e(this.data)),t},remove:function(t){var n=_.without(this.data.entries,_.findWhere(this.data.entries,t));n.length>0&&(this.data.entries=n,localStorage.setItem(this.storage,e(this.data)))},select:function(t){return _.findWhere(this.data.entries,t)},selectAll:function(){return this.data.entries},count:function(){return this.data.entries.length},flush:function(){this.data={entries:[]},localStorage.setItem(this.storage,e(this.data))}}:{save:function(){},remove:function(){},select:function(){},selectAll:function(){},count:function(){},flush:function(){}},_.extend(t.prototype,a),t}();